\doxysection{src/api\+\_\+handlers.c File Reference}
\hypertarget{api__handlers_8c}{}\label{api__handlers_8c}\index{src/api\_handlers.c@{src/api\_handlers.c}}


Implementación de manejadores Co\+AP para el API Gateway.  


{\ttfamily \#include $<$coap3/coap.\+h$>$}\newline
{\ttfamily \#include $<$coap3/coap\+\_\+pdu.\+h$>$}\newline
{\ttfamily \#include $<$coap3/coap\+\_\+option.\+h$>$}\newline
{\ttfamily \#include $<$coap3/coap\+\_\+uri.\+h$>$}\newline
{\ttfamily \#include $<$coap3/coap\+\_\+session.\+h$>$}\newline
{\ttfamily \#include $<$coap3/coap\+\_\+net.\+h$>$}\newline
{\ttfamily \#include "{}api\+\_\+gateway/api\+\_\+handlers.\+h"{}}\newline
{\ttfamily \#include "{}api\+\_\+gateway/elevator\+\_\+state\+\_\+manager.\+h"{}}\newline
{\ttfamily \#include "{}api\+\_\+gateway/can\+\_\+bridge.\+h"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
{\ttfamily \#include $<$netinet/in.\+h$>$}\newline
{\ttfamily \#include $<$arpa/inet.\+h$>$}\newline
{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include "{}api\+\_\+gateway/execution\+\_\+logger.\+h"{}}\newline
Include dependency graph for api\+\_\+handlers.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{api__handlers_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structcentral__request__entry__t}{central\+\_\+request\+\_\+entry\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Entrada de tracker para solicitudes al servidor central. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{api__handlers_8c_ad04b8fe3b47e88c03be3934bf64b3a8a}{MAX\+\_\+\+PENDING\+\_\+\+REQUESTS\+\_\+\+TO\+\_\+\+CENTRAL}}~32
\begin{DoxyCompactList}\small\item\em Número máximo de solicitudes pendientes al servidor central. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{api__handlers_8c_a7fd01dcda5b603f45f20d97c84d9260b}{handle\+\_\+sigint\+\_\+gw}} (int signum)
\begin{DoxyCompactList}\small\item\em Manejador de señal para SIGINT (Ctrl+C) \end{DoxyCompactList}\item 
coap\+\_\+response\+\_\+t \mbox{\hyperlink{api__handlers_8c_a53890892a78846765f23427df89fc0af}{hnd\+\_\+central\+\_\+server\+\_\+response\+\_\+gw}} (coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}session\+\_\+from\+\_\+server, const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}sent\+\_\+to\+\_\+central, const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}received\+\_\+from\+\_\+central, const coap\+\_\+mid\+\_\+t mid\+\_\+from\+\_\+server)
\begin{DoxyCompactList}\small\item\em Manejador de respuestas del servidor central. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{api__handlers_8c_af5a21d636796fd0fe682efedb9420894}{hnd\+\_\+elevator\+\_\+api\+\_\+request\+\_\+gw}} (coap\+\_\+resource\+\_\+t \texorpdfstring{$\ast$}{*}resource, coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}elevator\+\_\+session, const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}elevator\+\_\+request\+\_\+pdu, const coap\+\_\+string\+\_\+t \texorpdfstring{$\ast$}{*}query, coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}response\+\_\+placeholder)
\begin{DoxyCompactList}\small\item\em Handler para solicitudes legacy de ascensor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{api__handlers_8c_a053f34293ce0f5e920e378b1cd18789e}{hnd\+\_\+cabin\+\_\+request\+\_\+from\+\_\+elevator\+\_\+gw}} (coap\+\_\+resource\+\_\+t \texorpdfstring{$\ast$}{*}resource, coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}elevator\+\_\+session, const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}elevator\+\_\+request\+\_\+pdu, const coap\+\_\+string\+\_\+t \texorpdfstring{$\ast$}{*}query, coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}response\+\_\+placeholder)
\begin{DoxyCompactList}\small\item\em Handler para solicitudes de cabina desde ascensor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{api__handlers_8c_aadcce191828355c65cabd0862f5f5b4a}{hnd\+\_\+floor\+\_\+call\+\_\+from\+\_\+elevator\+\_\+gw}} (coap\+\_\+resource\+\_\+t \texorpdfstring{$\ast$}{*}resource, coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}elevator\+\_\+session, const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}elevator\+\_\+request\+\_\+pdu, const coap\+\_\+string\+\_\+t \texorpdfstring{$\ast$}{*}query, coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}response\+\_\+placeholder)
\begin{DoxyCompactList}\small\item\em Handler para llamadas de piso desde ascensor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
volatile sig\+\_\+atomic\+\_\+t \mbox{\hyperlink{api__handlers_8c_a8a485bed3bbf69f7556aa3167043d7e2}{quit\+\_\+main\+\_\+loop}}
\begin{DoxyCompactList}\small\item\em Bandera para indicar si el bucle principal debe terminar. \end{DoxyCompactList}\item 
elevator\+\_\+group\+\_\+state\+\_\+t \mbox{\hyperlink{api__handlers_8c_a2e69b946477ed035db425886fe261a13}{managed\+\_\+elevator\+\_\+group}}
\begin{DoxyCompactList}\small\item\em Estado del grupo de ascensores gestionado por este gateway. \end{DoxyCompactList}\item 
coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{api__handlers_8c_abe546e2cc7517fb0f6e0218ca1e3ff10}{g\+\_\+dtls\+\_\+session\+\_\+to\+\_\+central\+\_\+server}}
\begin{DoxyCompactList}\small\item\em Sesión DTLS global con el servidor central. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementación de manejadores Co\+AP para el API Gateway. 

\begin{DoxyAuthor}{Author}
Sistema de Control de Ascensores 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2025 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
2.\+0
\end{DoxyVersion}
Este archivo contiene la lógica para manejar\+:
\begin{DoxyItemize}
\item {\bfseries{Solicitudes entrantes}}\+: Requests de clientes (ascensores) vía Co\+AP
\item {\bfseries{Respuestas del servidor central}}\+: Procesamiento de respuestas de asignación
\item {\bfseries{Gestión de trackers}}\+: Seguimiento de solicitudes pendientes
\item {\bfseries{Manejo de señales}}\+: Terminación elegante con SIGINT
\item {\bfseries{Puente CAN-\/\+Co\+AP}}\+: Integración con el sistema de comunicación CAN
\end{DoxyItemize}

Funcionalidades principales\+:
\begin{DoxyItemize}
\item Recepción de solicitudes de llamada de piso y cabina
\item Reenvío de solicitudes al servidor central con estado de ascensores
\item Gestión de sesiones DTLS para comunicación segura
\item Tracking de solicitudes pendientes para correlación de respuestas
\item Integración con el gestor de estado de ascensores
\end{DoxyItemize}

\begin{DoxySeeAlso}{See also}
\doxylink{api__handlers_8h}{api\+\_\+handlers.\+h} 

elevator\+\_\+state\+\_\+manager.\+h 

can\+\_\+bridge.\+h 

coap\+\_\+config.\+h 
\end{DoxySeeAlso}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{api__handlers_8c_ad04b8fe3b47e88c03be3934bf64b3a8a}\label{api__handlers_8c_ad04b8fe3b47e88c03be3934bf64b3a8a} 
\index{api\_handlers.c@{api\_handlers.c}!MAX\_PENDING\_REQUESTS\_TO\_CENTRAL@{MAX\_PENDING\_REQUESTS\_TO\_CENTRAL}}
\index{MAX\_PENDING\_REQUESTS\_TO\_CENTRAL@{MAX\_PENDING\_REQUESTS\_TO\_CENTRAL}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{MAX\_PENDING\_REQUESTS\_TO\_CENTRAL}{MAX\_PENDING\_REQUESTS\_TO\_CENTRAL}}
{\footnotesize\ttfamily \#define MAX\+\_\+\+PENDING\+\_\+\+REQUESTS\+\_\+\+TO\+\_\+\+CENTRAL~32}



Número máximo de solicitudes pendientes al servidor central. 

Define el límite de solicitudes que pueden estar pendientes de respuesta del servidor central simultáneamente. Ajustar según la capacidad del sistema. 

\doxysubsection{Function Documentation}
\Hypertarget{api__handlers_8c_a7fd01dcda5b603f45f20d97c84d9260b}\label{api__handlers_8c_a7fd01dcda5b603f45f20d97c84d9260b} 
\index{api\_handlers.c@{api\_handlers.c}!handle\_sigint\_gw@{handle\_sigint\_gw}}
\index{handle\_sigint\_gw@{handle\_sigint\_gw}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{handle\_sigint\_gw()}{handle\_sigint\_gw()}}
{\footnotesize\ttfamily void handle\+\_\+sigint\+\_\+gw (\begin{DoxyParamCaption}\item[{int}]{signum }\end{DoxyParamCaption})}



Manejador de señal para SIGINT (Ctrl+C) 

Signal handler for SIGINT (Ctrl+C) to allow graceful shutdown.


\begin{DoxyParams}{Parameters}
{\em signum} & Número de señal recibida (se espera SIGINT). No utilizado.\\
\hline
\end{DoxyParams}
Establece la bandera quit\+\_\+main\+\_\+loop a 1 para señalar al bucle principal de eventos que debe terminar, permitiendo una terminación elegante del API Gateway.

Esta función es registrada como manejador de SIGINT en \doxylink{main_8c}{main.\+c} y proporciona una forma limpia de cerrar la aplicación. \Hypertarget{api__handlers_8c_a053f34293ce0f5e920e378b1cd18789e}\label{api__handlers_8c_a053f34293ce0f5e920e378b1cd18789e} 
\index{api\_handlers.c@{api\_handlers.c}!hnd\_cabin\_request\_from\_elevator\_gw@{hnd\_cabin\_request\_from\_elevator\_gw}}
\index{hnd\_cabin\_request\_from\_elevator\_gw@{hnd\_cabin\_request\_from\_elevator\_gw}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{hnd\_cabin\_request\_from\_elevator\_gw()}{hnd\_cabin\_request\_from\_elevator\_gw()}}
{\footnotesize\ttfamily void hnd\+\_\+cabin\+\_\+request\+\_\+from\+\_\+elevator\+\_\+gw (\begin{DoxyParamCaption}\item[{coap\+\_\+resource\+\_\+t \texorpdfstring{$\ast$}{*}}]{resource,  }\item[{coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}}]{elevator\+\_\+session,  }\item[{const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{elevator\+\_\+request\+\_\+pdu,  }\item[{const coap\+\_\+string\+\_\+t \texorpdfstring{$\ast$}{*}}]{query,  }\item[{coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{response\+\_\+placeholder }\end{DoxyParamCaption})}



Handler para solicitudes de cabina desde ascensor. 


\begin{DoxyParams}{Parameters}
{\em resource} & Recurso Co\+AP asociado \\
\hline
{\em elevator\+\_\+session} & Sesión Co\+AP del ascensor solicitante \\
\hline
{\em elevator\+\_\+request\+\_\+pdu} & PDU de la solicitud Co\+AP recibida \\
\hline
{\em query} & Cadena de consulta de la solicitud (si existe) \\
\hline
{\em response\+\_\+placeholder} & PDU de respuesta (reservado para futuro uso)\\
\hline
\end{DoxyParams}
Este handler procesa solicitudes de cabina originadas desde el interior de los ascensores. Las solicitudes incluyen el piso destino solicitado por usuarios dentro del ascensor.

\begin{DoxyNote}{Note}
Función stub -\/ la funcionalidad principal se maneja vía puente CAN 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
can\+\_\+bridge.\+h 

\doxylink{api__handlers_8h}{api\+\_\+handlers.\+h} 
\end{DoxySeeAlso}
\Hypertarget{api__handlers_8c_a53890892a78846765f23427df89fc0af}\label{api__handlers_8c_a53890892a78846765f23427df89fc0af} 
\index{api\_handlers.c@{api\_handlers.c}!hnd\_central\_server\_response\_gw@{hnd\_central\_server\_response\_gw}}
\index{hnd\_central\_server\_response\_gw@{hnd\_central\_server\_response\_gw}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{hnd\_central\_server\_response\_gw()}{hnd\_central\_server\_response\_gw()}}
{\footnotesize\ttfamily coap\+\_\+response\+\_\+t hnd\+\_\+central\+\_\+server\+\_\+response\+\_\+gw (\begin{DoxyParamCaption}\item[{coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}}]{session\+\_\+from\+\_\+server,  }\item[{const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{sent\+\_\+to\+\_\+central,  }\item[{const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{received\+\_\+from\+\_\+central,  }\item[{const coap\+\_\+mid\+\_\+t}]{mid\+\_\+from\+\_\+server }\end{DoxyParamCaption})}



Manejador de respuestas del servidor central. 

Handles responses received from the Central Server.


\begin{DoxyParams}{Parameters}
{\em session\+\_\+from\+\_\+server} & Sesión Co\+AP desde la cual se recibió la respuesta \\
\hline
{\em sent\+\_\+to\+\_\+central} & PDU que fue enviado al servidor central \\
\hline
{\em received\+\_\+from\+\_\+central} & PDU recibido del servidor central \\
\hline
{\em mid\+\_\+from\+\_\+server} & Message ID de la respuesta del servidor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
COAP\+\_\+\+RESPONSE\+\_\+\+OK si la respuesta se procesó correctamente
\end{DoxyReturn}
Esta función procesa las respuestas recibidas del servidor central para solicitudes de asignación de ascensores. Realiza las siguientes operaciones\+:


\begin{DoxyEnumerate}
\item {\bfseries{Validación}}\+: Verifica que se recibió un PDU válido
\item {\bfseries{Parsing JSON}}\+: Extrae y parsea el payload JSON de la respuesta
\item {\bfseries{Correlación}}\+: Encuentra el tracker original usando el token
\item {\bfseries{Procesamiento}}\+: Extrae información de asignación (ascensor\+\_\+asignado\+\_\+id, tarea\+\_\+id)
\item {\bfseries{Notificación CAN}}\+: Envía respuesta al controlador CAN correspondiente
\item {\bfseries{Limpieza}}\+: Libera recursos del tracker y memoria asociada
\end{DoxyEnumerate}

Maneja diferentes códigos de respuesta\+:
\begin{DoxyItemize}
\item 2.\+01 Created\+: Asignación exitosa
\item 4.\+xx Client Error\+: Errores de solicitud
\item 5.\+xx Server Error\+: Errores del servidor
\end{DoxyItemize}

\begin{DoxySeeAlso}{See also}
add\+\_\+central\+\_\+request\+\_\+tracker() 

find\+\_\+and\+\_\+remove\+\_\+central\+\_\+request\+\_\+tracker() 

can\+\_\+bridge.\+h 
\end{DoxySeeAlso}
\Hypertarget{api__handlers_8c_af5a21d636796fd0fe682efedb9420894}\label{api__handlers_8c_af5a21d636796fd0fe682efedb9420894} 
\index{api\_handlers.c@{api\_handlers.c}!hnd\_elevator\_api\_request\_gw@{hnd\_elevator\_api\_request\_gw}}
\index{hnd\_elevator\_api\_request\_gw@{hnd\_elevator\_api\_request\_gw}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{hnd\_elevator\_api\_request\_gw()}{hnd\_elevator\_api\_request\_gw()}}
{\footnotesize\ttfamily void hnd\+\_\+elevator\+\_\+api\+\_\+request\+\_\+gw (\begin{DoxyParamCaption}\item[{coap\+\_\+resource\+\_\+t \texorpdfstring{$\ast$}{*}}]{resource,  }\item[{coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}}]{elevator\+\_\+session,  }\item[{const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{elevator\+\_\+request\+\_\+pdu,  }\item[{const coap\+\_\+string\+\_\+t \texorpdfstring{$\ast$}{*}}]{query,  }\item[{coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{response\+\_\+placeholder }\end{DoxyParamCaption})}



Handler para solicitudes legacy de ascensor. 


\begin{DoxyParams}{Parameters}
{\em resource} & Recurso Co\+AP asociado \\
\hline
{\em elevator\+\_\+session} & Sesión Co\+AP del ascensor solicitante \\
\hline
{\em elevator\+\_\+request\+\_\+pdu} & PDU de la solicitud Co\+AP recibida \\
\hline
{\em query} & Cadena de consulta de la solicitud (si existe) \\
\hline
{\em response\+\_\+placeholder} & PDU de respuesta (reservado para futuro uso)\\
\hline
\end{DoxyParams}
Este handler procesa solicitudes legacy de ascensores que utilizan el protocolo Co\+AP anterior. Actualmente implementado como stub para compatibilidad con versiones anteriores del sistema.

\begin{DoxyNote}{Note}
Función stub -\/ no implementa funcionalidad específica 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\doxylink{api__handlers_8h}{api\+\_\+handlers.\+h} 
\end{DoxySeeAlso}
\Hypertarget{api__handlers_8c_aadcce191828355c65cabd0862f5f5b4a}\label{api__handlers_8c_aadcce191828355c65cabd0862f5f5b4a} 
\index{api\_handlers.c@{api\_handlers.c}!hnd\_floor\_call\_from\_elevator\_gw@{hnd\_floor\_call\_from\_elevator\_gw}}
\index{hnd\_floor\_call\_from\_elevator\_gw@{hnd\_floor\_call\_from\_elevator\_gw}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{hnd\_floor\_call\_from\_elevator\_gw()}{hnd\_floor\_call\_from\_elevator\_gw()}}
{\footnotesize\ttfamily void hnd\+\_\+floor\+\_\+call\+\_\+from\+\_\+elevator\+\_\+gw (\begin{DoxyParamCaption}\item[{coap\+\_\+resource\+\_\+t \texorpdfstring{$\ast$}{*}}]{resource,  }\item[{coap\+\_\+session\+\_\+t \texorpdfstring{$\ast$}{*}}]{elevator\+\_\+session,  }\item[{const coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{elevator\+\_\+request\+\_\+pdu,  }\item[{const coap\+\_\+string\+\_\+t \texorpdfstring{$\ast$}{*}}]{query,  }\item[{coap\+\_\+pdu\+\_\+t \texorpdfstring{$\ast$}{*}}]{response\+\_\+placeholder }\end{DoxyParamCaption})}



Handler para llamadas de piso desde ascensor. 


\begin{DoxyParams}{Parameters}
{\em resource} & Recurso Co\+AP asociado \\
\hline
{\em elevator\+\_\+session} & Sesión Co\+AP del ascensor solicitante \\
\hline
{\em elevator\+\_\+request\+\_\+pdu} & PDU de la solicitud Co\+AP recibida \\
\hline
{\em query} & Cadena de consulta de la solicitud (si existe) \\
\hline
{\em response\+\_\+placeholder} & PDU de respuesta (reservado para futuro uso)\\
\hline
\end{DoxyParams}
Este handler procesa llamadas de piso que se originan desde botones externos en los pisos del edificio. Las solicitudes incluyen el piso origen y la dirección deseada (subir/bajar).

\begin{DoxyNote}{Note}
Función stub -\/ la funcionalidad principal se maneja vía puente CAN 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
can\+\_\+bridge.\+h 

\doxylink{api__handlers_8h}{api\+\_\+handlers.\+h} 
\end{DoxySeeAlso}


\doxysubsection{Variable Documentation}
\Hypertarget{api__handlers_8c_abe546e2cc7517fb0f6e0218ca1e3ff10}\label{api__handlers_8c_abe546e2cc7517fb0f6e0218ca1e3ff10} 
\index{api\_handlers.c@{api\_handlers.c}!g\_dtls\_session\_to\_central\_server@{g\_dtls\_session\_to\_central\_server}}
\index{g\_dtls\_session\_to\_central\_server@{g\_dtls\_session\_to\_central\_server}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{g\_dtls\_session\_to\_central\_server}{g\_dtls\_session\_to\_central\_server}}
{\footnotesize\ttfamily coap\+\_\+session\+\_\+t\texorpdfstring{$\ast$}{*} g\+\_\+dtls\+\_\+session\+\_\+to\+\_\+central\+\_\+server\hspace{0.3cm}{\ttfamily [extern]}}



Sesión DTLS global con el servidor central. 

Declaración externa de la sesión DTLS definida en \doxylink{main_8c}{main.\+c}. Se utiliza para enviar solicitudes al servidor central de manera eficiente reutilizando la misma conexión segura.

\begin{DoxySeeAlso}{See also}
\doxylink{main_8c}{main.\+c} 

\doxylink{main_8c_a7910799dc4997ea7ff42bb0339134d94}{get\+\_\+or\+\_\+create\+\_\+central\+\_\+server\+\_\+dtls\+\_\+session()}
\end{DoxySeeAlso}
Mantiene la conexión segura DTLS con el servidor central para el envío de solicitudes de asignación de ascensores. Se reutiliza para múltiples solicitudes para eficiencia. \Hypertarget{api__handlers_8c_a2e69b946477ed035db425886fe261a13}\label{api__handlers_8c_a2e69b946477ed035db425886fe261a13} 
\index{api\_handlers.c@{api\_handlers.c}!managed\_elevator\_group@{managed\_elevator\_group}}
\index{managed\_elevator\_group@{managed\_elevator\_group}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{managed\_elevator\_group}{managed\_elevator\_group}}
{\footnotesize\ttfamily elevator\+\_\+group\+\_\+state\+\_\+t managed\+\_\+elevator\+\_\+group\hspace{0.3cm}{\ttfamily [extern]}}



Estado del grupo de ascensores gestionado por este gateway. 

Declaración externa para acceder al estado del grupo de ascensores gestionado en \doxylink{main_8c}{main.\+c}. Contiene información completa de todos los ascensores del edificio.

\begin{DoxySeeAlso}{See also}
elevator\+\_\+group\+\_\+state\+\_\+t 

\doxylink{main_8c}{main.\+c}
\end{DoxySeeAlso}
Estado del grupo de ascensores gestionado por este gateway.

Contiene el estado completo de todos los ascensores del edificio gestionado por este API Gateway, incluyendo posiciones actuales, tareas asignadas, estados de puertas y disponibilidad.

\begin{DoxySeeAlso}{See also}
elevator\+\_\+group\+\_\+state\+\_\+t 

elevator\+\_\+state\+\_\+manager.\+h 
\end{DoxySeeAlso}
\Hypertarget{api__handlers_8c_a8a485bed3bbf69f7556aa3167043d7e2}\label{api__handlers_8c_a8a485bed3bbf69f7556aa3167043d7e2} 
\index{api\_handlers.c@{api\_handlers.c}!quit\_main\_loop@{quit\_main\_loop}}
\index{quit\_main\_loop@{quit\_main\_loop}!api\_handlers.c@{api\_handlers.c}}
\doxysubsubsection{\texorpdfstring{quit\_main\_loop}{quit\_main\_loop}}
{\footnotesize\ttfamily volatile sig\+\_\+atomic\+\_\+t quit\+\_\+main\+\_\+loop\hspace{0.3cm}{\ttfamily [extern]}}



Bandera para indicar si el bucle principal debe terminar. 

Esta variable se declara como extern en \doxylink{api__handlers_8h}{api\+\_\+handlers.\+h} y se define en \doxylink{main_8c}{main.\+c}. Es establecida por el manejador de señal (handle\+\_\+sigint\+\_\+gw) para detener el bucle principal de eventos.

\begin{DoxySeeAlso}{See also}
\doxylink{api__handlers_8c_a7fd01dcda5b603f45f20d97c84d9260b}{handle\+\_\+sigint\+\_\+gw()}
\end{DoxySeeAlso}
Bandera para indicar si el bucle principal debe terminar.

Esta bandera se establece a 1 por el manejador de señal SIGINT (handle\+\_\+sigint\+\_\+gw) para indicar que la aplicación debe terminar de manera elegante.

\begin{DoxySeeAlso}{See also}
\doxylink{api__handlers_8c_a7fd01dcda5b603f45f20d97c84d9260b}{handle\+\_\+sigint\+\_\+gw()} 
\end{DoxySeeAlso}
